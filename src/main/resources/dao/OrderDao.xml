<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.newler.jdweb.dao.OrderDao">
    <resultMap id="orderResult" type="com.newler.jdweb.pojo.Order">
        <id property="id" column="id"/>
        <result property="carriageId" column="carriage_id"/>
        <result property="carriageUrl" column="carriage_url"/>
        <result property="carrier" column="carrier"/>
        <result property="date" column="date"/>
        <result property="price" column="price"/>
        <result property="receiverAddress" column="receiver_address"/>
        <result property="receiverName" column="receiver_name"/>
        <result property="receiverPhone" column="receiver_phone"/>
        <result property="orderUrl" column="order_url"/>
        <result property="status" column="status"/>
        <result property="completed" column="completed"/>
        <result property="uid" column="uid"/>
        <result property="registration" column="registration"/>
        <result property="payWay" column="pay_way"/>

        <collection property="goodsInfos" javaType="ArrayList" ofType="com.newler.jdweb.pojo.GoodsInfo" columnPrefix="g_">
            <id column="id" property="id"/>
            <result property="goodsUrl" column="url"/>
            <result property="price" column="price"/>
            <result property="name" column="name"/>
        </collection>
    </resultMap>
    <select id="getOrderList" resultMap="orderResult" parameterType="int">
        SELECT o.*,g.id AS g_id, g.price AS g_price, g.name AS g_name, g.goods_url AS g_url
        FROM  orderinfo AS o LEFT JOIN ordergoods AS og ON o.id = og.order_id
        LEFT JOIN goodsinfo AS g ON og.goods_id = g.id;
    </select>

</mapper>